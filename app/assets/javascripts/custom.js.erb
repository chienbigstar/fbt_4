$(document).on('turbolinks:load', function() {
  $(".autoajax").trigger("click");
  $('input[class="daterange"]').daterangepicker();

  $(function() {
    $date_range = $('#filterrific_date_range');
    $date_range .daterangepicker({
      timePicker24Hour: true,
      autoUpdateInput: false,
      timePicker: true,
      timePickerIncrement: 30,
      locale: {
        cancelLabel: 'Clear',
        format: 'YYYY-MM-DD HH:mm:ss'
      }
    });

    $date_range .on('apply.daterangepicker', function(ev, picker) {
      $(this).val(picker.startDate.format('YYYY-MM-DD HH:mm:ss') +
        ' -> ' + picker.endDate.format('YYYY-MM-DD HH:mm:ss'));
    });

    $date_range .on('cancel.daterangepicker', function(ev, picker) {
      $(this).val('');
    });

  });

  $(function() {
    $('.time_picker').daterangepicker({
        singleDatePicker: true,
        showDropdowns: true,
        timePicker24Hour: true,
        autoUpdateInput: false,
        timePicker: true,
        timePickerIncrement: 30,
        locale: {
          cancelLabel: 'Clear',
          format: 'YYYY-MM-DD HH:mm:ss'
        }
      });
    $('.time_picker').on('apply.daterangepicker', function(ev, picker) {
      $(this).val(picker.endDate.format('YYYY-MM-DD HH:mm:ss'));
    });
  });
});
